(()=>{"use strict";const e={row_0:[{btnName:"Backquote",type:"symbol",EN:"±",en:"§",BY:"+",by:"’"},{btnName:"Digit1",type:"symbol",EN:"!",en:"1",BY:"!",by:"1"},{btnName:"Digit2",type:"symbol",EN:"@",en:"2",BY:'"',by:"2"},{btnName:"Digit3",type:"symbol",EN:"#",en:"3",BY:"№",by:"3"},{btnName:"Digit4",type:"symbol",EN:"$",en:"4",BY:"%",by:"4"},{btnName:"Digit5",type:"symbol",EN:"%",en:"5",BY:":",by:"5"},{btnName:"Digit6",type:"symbol",EN:"^",en:"6",BY:",",by:"6"},{btnName:"Digit7",type:"symbol",EN:"&",en:"7",BY:".",by:"7"},{btnName:"Digit8",type:"symbol",EN:"*",en:"8",BY:";",by:"8"},{btnName:"Digit9",type:"symbol",EN:"(",en:"9",BY:"(",by:"9"},{btnName:"Digit0",type:"symbol",EN:")",en:"0",BY:")",by:"0"},{btnName:"Minus",type:"symbol",EN:"_",en:"-",BY:"_",by:"-"},{btnName:"Equal",type:"symbol",EN:"+",en:"=",BY:"+",by:"="},{btnName:"Backspace",type:"modifier",symbol:"⌫",size:"medium"}],row_1:[{btnName:"Tab",type:"modifier",symbol:"↹",size:"medium"},{btnName:"KeyQ",type:"symbol",EN:"Q",en:"q",BY:"Й",by:"й"},{btnName:"KeyW",type:"symbol",EN:"W",en:"w",BY:"Ц",by:"ц"},{btnName:"KeyE",type:"symbol",EN:"E",en:"e",BY:"У",by:"у"},{btnName:"KeyR",type:"symbol",EN:"R",en:"r",BY:"К",by:"к"},{btnName:"KeyT",type:"symbol",EN:"T",en:"t",BY:"Е",by:"е"},{btnName:"KeyY",type:"symbol",EN:"Y",en:"y",BY:"Н",by:"н"},{btnName:"KeyU",type:"symbol",EN:"U",en:"u",BY:"Г",by:"г"},{btnName:"KeyI",type:"symbol",EN:"I",en:"i",BY:"Ш",by:"ш"},{btnName:"KeyO",type:"symbol",EN:"O",en:"o",BY:"Ў",by:"ў"},{btnName:"KeyP",type:"symbol",EN:"P",en:"p",BY:"З",by:"з"},{btnName:"BracketLeft",type:"symbol",EN:"{",en:"[",BY:"Х",by:"х"},{btnName:"BracketRight",type:"symbol",EN:"}",en:"]",BY:"'",by:"'"},{btnName:"Backslash",type:"symbol",EN:"|",en:"\\",BY:"Ё",by:"ё"}],row_2:[{btnName:"CapsLock",type:"modifier",symbol:"⇪",size:"long"},{btnName:"KeyA",type:"symbol",EN:"A",en:"a",BY:"Ф",by:"ф"},{btnName:"KeyS",type:"symbol",EN:"S",en:"s",BY:"Ы",by:"ы"},{btnName:"KeyD",type:"symbol",EN:"D",en:"d",BY:"В",by:"в"},{btnName:"KeyF",type:"symbol",EN:"F",en:"f",BY:"А",by:"а"},{btnName:"KeyG",type:"symbol",EN:"G",en:"g",BY:"П",by:"п"},{btnName:"KeyH",type:"symbol",EN:"H",en:"h",BY:"Р",by:"р"},{btnName:"KeyJ",type:"symbol",EN:"J",en:"j",BY:"О",by:"о"},{btnName:"KeyK",type:"symbol",EN:"K",en:"k",BY:"Л",by:"л"},{btnName:"KeyL",type:"symbol",EN:"L",en:"l",BY:"Д",by:"д"},{btnName:"Semicolon",type:"symbol",EN:":",en:";",BY:"Ж",by:"ж"},{btnName:"Quote",type:"symbol",EN:'"',en:"'",BY:"Э",by:"э"},{btnName:"Enter",type:"modifier",symbol:"↵",size:"long"}],row_3:[{btnName:"ShiftLeft",type:"modifier",symbol:"⇧",size:"medium"},{btnName:"IntlBackslash",type:"symbol",EN:"~",en:"`",BY:"„",by:"“"},{btnName:"KeyZ",type:"symbol",EN:"Z",en:"z",BY:"Я",by:"я"},{btnName:"KeyX",type:"symbol",EN:"X",en:"x",BY:"Ч",by:"ч"},{btnName:"KeyC",type:"symbol",EN:"C",en:"c",BY:"С",by:"с"},{btnName:"KeyV",type:"symbol",EN:"V",en:"v",BY:"М",by:"м"},{btnName:"KeyB",type:"symbol",EN:"B",en:"b",BY:"І",by:"і"},{btnName:"KeyN",type:"symbol",EN:"N",en:"n",BY:"Т",by:"т"},{btnName:"KeyM",type:"symbol",EN:"M",en:"m",BY:"Ь",by:"ь"},{btnName:"Comma",type:"symbol",EN:"<",en:",",BY:"Б",by:"б"},{btnName:"Period",type:"symbol",EN:">",en:".",BY:"Ю",by:"ю"},{btnName:"Slash",type:"symbol",EN:"?",en:"/",BY:"?",by:"/"},{btnName:"ArrowUp",type:"modifier",symbol:"↑",size:"small"},{btnName:"ShiftRight",type:"modifier",symbol:"⇧",size:"small"}],row_4:[{btnName:"Language",type:"modifier",symbol:"EN",alternative:"BY",size:"small"},{btnName:"ControlLeft",type:"modifier",symbol:"^",size:"small"},{btnName:"AltLeft",type:"modifier",symbol:"⌥",size:"small"},{btnName:"MetaLeft",type:"modifier",symbol:"⌘",size:"medium"},{btnName:"Space",type:"modifier",symbol:"&ensp;",size:"space"},{btnName:"MetaRight",type:"modifier",symbol:"⌘",size:"medium"},{btnName:"AltRight",type:"modifier",symbol:"⌥",size:"small"},{btnName:"ArrowLeft",type:"modifier",symbol:"←",size:"small"},{btnName:"ArrowDown",type:"modifier",symbol:"↓",size:"small"},{btnName:"ArrowRight",type:"modifier",symbol:"→",size:"small"}]},t=document.createElement("div");t.className="container",document.body.append(t);const n=document.createElement("h1");n.innerHTML="Virtual MacOS keyboard",t.append(n);const s=document.createElement("textarea");t.append(s);const a=document.createElement("div");t.append(a);const y=document.createElement("p");y.innerHTML="To switch language use ⌥ (Alt) button or generic language button at bottom left",t.append(y);const b=new class{constructor(t,n){this.keyboard=t,this.textarea=n,this.buttons=e,this.layout="en",this.caps=!1,this.btns=[]}generate(){this.keyboard.classList.add("keyboard"),Object.keys(e).forEach((t=>{const n=document.createElement("div");n.className="keyboard__row",n.id=`${t}`,e[t].forEach((e=>{const t=document.createElement("button");t.className="button","symbol"===e.type?(t.classList.add("button_symbol"),t.innerHTML="en"===this.layout?e.en:e.by,t.setAttribute("char-en",e.en),t.setAttribute("shift-en",e.EN),t.setAttribute("char-by",e.by),t.setAttribute("shift-by",e.BY)):(t.classList.add("button_modifier"),t.classList.add(`button_size_${e.size}`),t.innerHTML=e.symbol),t.id=e.btnName,n.append(t),this.btns.push(t)})),this.keyboard.append(n)}))}switchCase(){const e=this.btns.filter((e=>e.classList.contains("button_symbol")));this.caps?("en"===this.layout?e.forEach((e=>{e.innerText=e.getAttribute("char-en")})):e.forEach((e=>{e.innerText=e.getAttribute("char-by")})),this.caps=!1):("en"===this.layout?e.forEach((e=>{e.innerText=e.getAttribute("shift-en")})):e.forEach((e=>{e.innerText=e.getAttribute("shift-by")})),this.caps=!0)}switchLanguage(){const e=this.btns.filter((e=>e.classList.contains("button_symbol")));"en"===this.layout?(this.caps?e.forEach((e=>{e.innerText=e.getAttribute("shift-by")})):e.forEach((e=>{e.innerText=e.getAttribute("char-by")})),this.layout="by",document.getElementById("Language").innerHTML="BY"):"by"===this.layout&&(this.caps?e.forEach((e=>{e.innerText=e.getAttribute("shift-en")})):e.forEach((e=>{e.innerText=e.getAttribute("char-en")})),this.layout="en",document.getElementById("Language").innerHTML="EN")}changeTextarea(e){const t=this.textarea;let n=this.textarea.selectionStart;const s=this.textarea.selectionEnd;let a;switch(this.textarea.selectionStart===this.textarea.selectionEnd&&"Backspace"===e.id&&(n=Math.max(0,n-1)),"Backspace"===e.id&&this.textarea.setRangeText("",n,s),e.id){case"Enter":a="\n";break;case"Tab":a="    ";break;case"ArrowUp":a="↑";break;case"ArrowLeft":a="←";break;case"ArrowDown":a="↓";break;case"ArrowRight":a="→";break;default:a=e.textContent}["Backspace","CapsLock","ShiftLeft","ShiftRight","ControlLeft","AltLeft","AltRight","MetaLeft","MetaRight","Language"].includes(e.id)||(t.setRangeText(a),this.textarea.selectionStart=n+a.length,this.textarea.selectionEnd=this.textarea.selectionStart,this.textarea.focus())}listenEvents(){document.addEventListener("keydown",(e=>{const t=document.getElementById(e.code);e.preventDefault(),e&&t.classList.add("pressed"),"CapsLock"===e.code&&!e.repeat||"ShiftLeft"===e.code||"ShiftRight"===e.code?this.switchCase():"AltLeft"===e.code||"AltRight"===e.code?this.switchLanguage():this.changeTextarea(t)})),document.addEventListener("keyup",(e=>{e.preventDefault();const t=document.getElementById(e.code);"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||this.switchCase(),t.classList.remove("pressed")})),this.btns.forEach((e=>{e.addEventListener("mousedown",(t=>{"Language"===e.id&&this.switchLanguage();const n=new KeyboardEvent("keydown",{code:t.target.id});document.dispatchEvent(n)})),e.addEventListener("mouseup",(e=>{const t=new KeyboardEvent("keyup",{code:e.target.id});document.dispatchEvent(t)})),e.addEventListener("mouseout",(e=>{if(this.pressed){const t=new KeyboardEvent("keyup",{code:e.target.id});document.dispatchEvent(t)}}))}))}}(a,s);b.generate(),b.listenEvents(),s.focus()})();
//# sourceMappingURL=main.js.map